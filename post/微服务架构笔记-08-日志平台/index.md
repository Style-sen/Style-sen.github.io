# 微服务架构笔记-08-中间件-日志平台


# 解决的问题

1. 将日志统一`收集`到一个地方集中管理(统一收集、过滤清洗)。
2. `处理`日志，输出运维、研发可用的数据（可视化界面、监控、告警、日志搜索）。
3. 满足【开发、运维、运营】`功能需求`（实时看日志、统计历史日志、实时行为分析[流式计算]、用户轨迹跟踪等）、`性能需求`（具有高吞吐能力、高扩展性、高容错性）等

# 组件

## 消息队列

### Kafka 
1. 一种高吞吐量的分布式发布订阅消息系统，它适合处理海量日志发布订阅，提供消息磁盘持久化、支持物理分片存储、多组消费等特性。

## 日志采集

### Elastic APM


### Filebeat

### Flume
1. 一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，它支持在日志系统中定制各类数据发送方，用于【收集数据】；同时提供对数据进行简单处理【过滤】，并写到各种数据接受方（可定制）【分发】。
2. 【缺点】 java 开发的，会比较占用机器资源。

### Prometheus

### rsyslog
1. The rocket-fast system for log processing

## 搜索引擎

### Elasticsearch
1. 一个开源实时分布式搜索引擎，具备如下特征：零配置，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。

## 可视化

### Grafana

### Kibana

# 思路

1. 【日志接入】开发业务日志SDK（下文为描述方便，称之为 BizLogSDK），嵌于各业务App；或者Http请求。
2. 【日志缓冲】从业务服务端收集日志并集中输出到Kafka；
3. 根据不同需求（查询、统计），由Flume对数据预处理并分发；
4. Flume 的下游组件对日志内容进行消费；

# 架构
1. 
