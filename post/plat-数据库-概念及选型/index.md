# 数据库概念及选型


[干货：实时数据库，内存数据库，关系型数据库比较](https://zhuanlan.zhihu.com/p/126749463)

## 1. 实时数据库

1. 实时数据库是采用实时数据模型建立起来的数据库，用于处理不断更新的快速变化的数据及具有时间限制的事务处理.对实时性要求高的【时标型信息】的[数据库管理系统].

    ```markdown
    1. 时标型数据并非仅仅指时间戳、值和质量码，还有一个很重要的属性，那就是及时性，及时性有两重含义，采样间隔和数据的新鲜度。时标型数据的价值随新鲜度降低而递减。1秒钟内的数据可以用来流程工业中的控制，5秒钟之内可以用来监视，半小时内的数据可以用来分析和优化，一天内的数据可以用来日报表，如果是半年前的数据，则只能做对比和追溯了。而得到数据的新鲜程度往往取决于采样频率，这就是为什么如此重视实时数据库的采样快速性。同时【采样的频率】还进一步决定了实时数据库保存信息的丰富程度。
    2. 从另一个方面讲，实时数据库中存储的数据永远是滤波后数据，实时数据库就像一个低通滤波器。
    ```

2. 实时数据库技术是实时系统和数据库技术相结合的产物，利用数据库技术来解决实时系统中的数据管理问题，同时利用实时技术为实时数据库提供时间驱动调和资源分配算法。
3. 主要应用于工业监控，如：电力、石化、化工、钢铁、冶金、造纸、交通控制和证券金融等工业领域的监控。
4. 特点：
    a. 时间约束:实时数据库是其数据和事务都有明确的时间限制的数据库。在实时系统中，具有时间约束的数据主要是来自于外部的动态数据，以及由这些数据求导出的新的数据。数据库中的数据必须如实反映现场设备的运行情况。
    b. 事务调度:实时数据库系统的正确性不仅依赖于事务的逻辑结果，而且依赖于该逻辑结果所产生的时间。事务调度既要考虑事务的执行时间，也要考虑事务的截止期、紧迫程度等因素。
    c. 数据存储:实时数据库主要承担系统所有实时数据的存储和管理，为相关的功能提供快速、正确的实时信息。为了达到实时性，实时数据库在系统运行过程中，应常驻内存，以保证读取速度。对于实时性要求不高的数据可存放在外存储空间。因此，在实时数据库设计时，要妥善处理时间与存储空间的矛盾，以保证系统的实时性。
    d. 数据在线压缩:在实际的数据存储中，实时数据库还要解决如何高效处理海量数据的问题。如果数据被原封不动地存储势必需要大量内存和磁盘空间以及耗费大量的时间，因此必须对实时数据进行在线压缩存储。

### 1.1. 核心技术原理

#### 1.1.1. 整体架构

1. 通过【现场适配层】适配现场的各种接口。然后通过【实时核心】，完成数据的采集、实时计算、报警计算、其它处理，实时数据被不断泵入【磁盘历史存储】，形成可追溯的历史信息，同时通过向【应用层】提供各种适配接口，支持各种开发语言和各种应用需求的访问。

##### 1.1.1.1. 现场接口适配层（底层）

1. 小型实时数据库（许多是号称自己是实时数据库的组态软件）均将核心和接口做在一起，用户使用起来较为简单，但如果出现任何一个不稳定的接口或局部异常，那整个实时数据库就崩溃了。
2. 对于大型应用，这种结构也较难扩展。接口软件被独立出来，即可以与实时数据库核心集中部署在1台计算机上，也可以与部署在接口机上，在大规模应用的时候，接口的负载不会影响核心的稳定，同时任意一个接口出现Crash，都不会导致实时数据库整体宕机。从而提供了更好的可扩展性和稳定性。
3. 影响接口效率因素:协议慢，网络状况，设备效率，工作站负载，底层软件质量。
4. 接口程序内部主要有两部分：现场接口协议栈和位号分组（按照不同的频率分组）。
5. 一般主动采集（还会增加一层缓存，影响效率）的频率都是1赫兹以下的（慢于1秒/次），更加快速的时候，均采用主动通知的方法，即当数据变化的时候，主动向实时数据库内核发送变化的数据，以达到更高效率。

#### 1.1.2. 简化模型

1. 实时数据库被简化成由多个接口、一个接口管理模块、一个组态模块、一个实时模块、一个高速缓存和一个历史模块组成，上面覆以应用接口。

#### 1.1.3. 核心IO策略

1. 实时数据库一般采用缓存来增加读实时数据的及时性，因此实时数据库核心中都有高速缓存。
2. 通过接口的采集，高速缓存的数据得到不断的更新，而当上层读位号的时候，实时数据库通过返回缓存的值来快速响应。因此，读一般是异步的。但写则一般是同步的，
3. 实时数据库不适宜对快速开关量的控制。
4. 另一种则是波动较快的窄带控制，意味着必须将被控量控制在一个较窄的区域内，这时必须考虑时滞问题，如果时滞稳定，则可以按照控制理论采用抵消时滞或者前馈的方式获得较好的控制效果。而如果时滞变化很大，则通过实时数据库之上进行的控制则效果不明显了，很容易失控。

#### 1.1.4. 核心调度策略

1. 很少有实时数据库是单线程的，大型实时数据库中往往都有线程池，对于需要实时处理读、写、采集等任务的实时数据库核心，其调度策略必须慎重考虑。
2. 首先，为难的是往往很难判断那些任务的优先级更高。一般，频率小的数据的优先级高，写的优先级高于读的优先级，采集的优先级高于读。

#### 1.1.5. 实时数据库压缩算法

1. 说到数据压缩，无非有损和无损。无损的一般通过各类近似霍夫曼编码的方法压缩数据，二有损则是采用线性拟合的方法。

#### 1.1.6. 索引技术

### 1.2. 选型

1. [实时数据库系统选型](https://www.cnblogs.com/guohu/p/7308156.html)

## 2. 内存数据库

1. 内存数据库就是将数据放在内存中直接操作的数据库。
2. 它利用内存的【读写速度比磁盘快】、内存是【随机访问】而磁盘是顺序访问这两个特点。
3. 将数据保存在内存中，在内存中模仿建立表结构和索引结构并针对内存特性进行优化，相比从磁盘上访问，内存数据库访问较快。



## 3. 关系数据库

1. 关系数据库是建立在集合代数基础上，应用数学方法来处理数据库中的数据。
