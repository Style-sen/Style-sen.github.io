# 大数据架构笔记-6-推荐系统


# 概述

1. 推荐系统即检索系统。(召回率、准确率)
2. 根据用户的输入从`结果数据库`中读取数据。
3. 另外有算法系统根据历史数据，生成推荐的`结果数据`。

# 基于内容的推荐算法(Content Base)

## 步骤

1. 根据Item的数据信息（元数据等）生成关键词的倒排序列（库）（特征建立和建模）。
2. 根据`用户输入`分词生成关键词B。
3. 根据关键词B查倒排序列库，找到Item。

## 优点

1. 提升推荐结果的相关性。
2. 结果可解释（容易被用户感知）。

## 缺点

1. 无个性化。
2. 依赖于对Item的深度分析。

## 优化

1. 在步骤2中，根据用户的行为数据分析，生成用户的兴趣模型（关键字）。
2. 这样具有了个性化。
3. 但是`依然推荐精度低`，如果用户行为稀疏导致覆盖率低。


# 基于协同的推荐算法(Collaboration Filtering)

## 优点

1. 充分利用群体智慧。
2. 推荐精度高于CB。
3. 利于挖掘隐含的相关性。

## 缺点

1. 推荐结果解释性差。
2. 对时效性强的item不适用。
3. 新用户冷启动问题。

## 步骤

1. 首先有一个UI矩阵（user-item的矩阵）（user-item的score（根据用户行为分析得到分数））（一般是稀疏矩阵）。
2. 第二步，见下边。

### User Based CF

1. 根据UI矩阵，生成UU矩阵（UU相似度，余弦相似度）。

### Item Based CF

1. 根据UI矩阵，生成II矩阵（II相似度，余弦相似度）。

### 对比

1. 【性能】UB适合用户较少的场合、IB适合Item较少的场合。
2. 【领域】UB适合时效性强，用户个性化兴趣不太明显的领域；IB适合长尾物品丰富，用户个性化需求强烈的领域。
3. 【实时性】UB用户有新行为，不一定造成推荐结果立即变化；IB用户有新行为，一定会导致推荐结果变化。
4. 【冷启动】新用户和新物品。
5. 【可解释】UB很难解释；IB根据用户历史行为可解释。

### 代码实现

#### 倒排式

1. map阶段获得<left,right,leftscore,rightscore>.
2. reduce阶段，将map过来的数据，扫一遍求得所有item的相似度（每一条求积，相同的<left,right>求和即可）。
3. 可以扩展成关键字对item的相似度、用户与用户的相似度，物品与物品的相似度。

#### 分块式

# 对冷启动的处理

## 用户冷启动

1. 热门排行榜。有行为之后，再个性化推荐。
2. 注册信息，提供粗粒度的个性化。
3. 导入用户社交信息，基于用户推荐。
4. 注册时，收集感兴趣的信息。

## 物品冷启动

1. 基于内容推荐。
2. 必须第一时间展现给用户（询问）。

## 系统冷启动

1. 引入专家知识（人工标记等），通过一定高效的方式迅速建立起物品的相关性矩阵。


