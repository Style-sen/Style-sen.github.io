<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>嵌入式-NRF-BLE - 锦枫紫兰</title><meta name="description" content="基于NRF芯片进行BLE开发的相关笔记"><meta property="og:title" content="嵌入式-NRF-BLE" />
<meta property="og:description" content="基于NRF芯片进行BLE开发的相关笔记" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E5%B5%8C%E5%85%A5%E5%BC%8F-nrf-ble/" />
<meta property="og:image" content="/logo.png"/>
<meta property="article:published_time" content="2019-04-08T10:33:53+00:00" />
<meta property="article:modified_time" content="2019-04-08T10:33:53+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/logo.png"/>

<meta name="twitter:title" content="嵌入式-NRF-BLE"/>
<meta name="twitter:description" content="基于NRF芯片进行BLE开发的相关笔记"/>
<meta name="application-name" content="锦枫紫兰">
<meta name="apple-mobile-web-app-title" content="锦枫紫兰"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="/post/%E5%B5%8C%E5%85%A5%E5%BC%8F-nrf-ble/" /><link rel="prev" href="/post/%E5%B5%8C%E5%85%A5%E5%BC%8F-nfc/" /><link rel="next" href="/post/%E7%BC%96%E7%A8%8B-%E8%A7%84%E8%8C%83/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "嵌入式-NRF-BLE",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/post\/%E5%B5%8C%E5%85%A5%E5%BC%8F-nrf-ble\/"
        },"image": ["\/images\/Apple-Devices-Preview.webp"],"genre": "post","keywords": "嵌入式","wordcount":  988 ,
        "url": "\/post\/%E5%B5%8C%E5%85%A5%E5%BC%8F-nrf-ble\/","datePublished": "2019-04-08T10:33:53+00:00","dateModified": "2019-04-08T10:33:53+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "\/images\/avatar.webp"},"author": {
                "@type": "Person",
                "name": "子兰"
            },"description": "基于NRF芯片进行BLE开发的相关笔记"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="锦枫紫兰">锦枫紫兰</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/post/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/about/" title="关于"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="锦枫紫兰">锦枫紫兰</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/post/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/about/" title="关于">关于</a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto" style="top:8rem;">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single special" data-toc="enable"><h2 class="single-title animated fadeInDown faster">嵌入式-NRF-BLE</h2><div class="single-card" ><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>目录</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#nordicsemiconductorpc-ble-driverhttpsgithubcomnordicsemiconductorpc-ble-driver"><a href="https://github.com/NordicSemiconductor/pc-ble-driver">NordicSemiconductor/pc-ble-driver</a></a></li>
    <li><a href="#nordicsemiconductorpc-ble-driver-jshttpsgithubcomnordicsemiconductorpc-ble-driver-js"><a href="https://github.com/NordicSemiconductor/pc-ble-driver-js">NordicSemiconductor/pc-ble-driver-js</a></a></li>
    <li><a href="#pc-nrf-dfu-jshttpsgithubcomnordicsemiconductorpc-nrf-dfu-js"><a href="https://github.com/NordicSemiconductor/pc-nrf-dfu-js">pc-nrf-dfu-js</a></a></li>
    <li><a href="#nordicsemiconductorpc-nrfconnect-rssihttpsgithubcomnordicsemiconductorpc-nrfconnect-rssi"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-rssi">NordicSemiconductor/pc-nrfconnect-rssi</a></a></li>
    <li><a href="#pc-nrfconnect-blehttpsgithubcomnordicsemiconductorpc-nrfconnect-ble"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-ble">pc-nrfconnect-ble</a></a></li>
    <li><a href="#pc-nrfconnect-corehttpsgithubcomnordicsemiconductorpc-nrfconnect-core"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-core">pc-nrfconnect-core</a></a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><p>NRF开源的库从底层到顶层。</p>
<h2 id="nordicsemiconductorpc-ble-driverhttpsgithubcomnordicsemiconductorpc-ble-driver"><a href="https://github.com/NordicSemiconductor/pc-ble-driver" target="_blank" rel="noopener noreffer">NordicSemiconductor/pc-ble-driver</a></h2>
<p><code>C\C++</code></p>
<p><a href="https://github.com/NordicSemiconductor/pc-ble-driver/releases/tag/v4.1.1" target="_blank" rel="noopener noreffer">最新版本V4.1.1</a></p>
<p>提供C/C++库for Bluetooth Low Energy nRF5 SoftDevice serialization.可以直接调用，也可以使用其上层封装（js和python版）。
pc-ble-driver是Nordic提供的一套开源的上位机BLE开发软件库，配合nrf52832开发板，可以在上位机实现BLE中央设备和外设的功能。上位机与硬件板之间通过UART通信，通信协议类似于蓝牙的HCI。在硬件设备中，运行基于softdevice的connectivity程序，与上位机的UART进行交互。
pc-ble-driver提供C/C++、Python和Node.js三种源码库，</p>
<h2 id="nordicsemiconductorpc-ble-driver-jshttpsgithubcomnordicsemiconductorpc-ble-driver-js"><a href="https://github.com/NordicSemiconductor/pc-ble-driver-js" target="_blank" rel="noopener noreffer">NordicSemiconductor/pc-ble-driver-js</a></h2>
<p><code>NODEJS</code></p>
<p>Node.js interface to the C/C++ pc-ble-driver library. <code>被nrfconnect使用通过nrf52840 dongle扫描和连接和DFU</code>。</p>
<h2 id="pc-nrf-dfu-jshttpsgithubcomnordicsemiconductorpc-nrf-dfu-js"><a href="https://github.com/NordicSemiconductor/pc-nrf-dfu-js" target="_blank" rel="noopener noreffer">pc-nrf-dfu-js</a></h2>
<p><code>NODEJS</code></p>
<p>pc-nrf-dfu-js is a Javascript module which provides DFU (Device Firmware Upgrade) via USB CDC ACM transport for Nordic devices.通过ACM口来更新Nordic设备的固件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import bleDriver from &#39;pc-ble-driver-js&#39;
//创建adapter实例
import { AdapterFactory, FirmwareRegistry } from &#39;pc-ble-driver-js&#39;;
const adapter = adapterFactory.createAdapter(sdVersion, comName, instanceId);
 adapter.close(error =&gt; {});
//创建DFU
dfu = new bleDriver.Dfu(&#39;BLE&#39;, {
            adapter,
            targetAddress: device.address,  //MAC地址
            targetAddressType: device.addressType,    //&#39;BLE_GAP_ADDR_TYPE_RANDOM_STATIC&#39; or `BLE_GAP_ADDR_TYPE_PUBLIC`.
            bondingData: getBondingData(),
        });
setupListeners(dispatch);

function setupListeners(dispatch) {
    dfu.on(&#39;transferStart&#39;, fileName =&gt; {
        dispatch(transferFileStartedAction(fileName));
    });
    dfu.on(&#39;transferComplete&#39;, fileName =&gt; {
        dispatch(transferFileCompletedAction(fileName));
    });
    dfu.on(&#39;progressUpdate&#39;, progress =&gt; {
        dispatch(updateProgressAction(progress));
    });
    dfu.on(&#39;logMessage&#39;, onLogMessage);
}
function updateProgressAction(progressInfo) {
    return {
        type: UPDATE_PROGRESS,
        percentCompleted: progressInfo.percentCompleted,
        status: progressInfo.stage,
        bytesPerSecond: progressInfo.bytesPerSecond,
        averageBytesPerSecond: progressInfo.averageBytesPerSecond,
        completedBytes: progressInfo.completedBytes,
        totalBytes: progressInfo.totalBytes,
    };
}
function removeListeners() {
    dfu.removeAllListeners(&#39;transferStart&#39;);
    dfu.removeAllListeners(&#39;transferComplete&#39;);
    dfu.removeAllListeners(&#39;progressUpdate&#39;);
    dfu.removeAllListeners(&#39;logMessage&#39;);
}
dfu.performDFU(filePath, (error, aborted) =&gt; {
            if (error) {
                dispatch(performDfuError(error));
                dispatch(showErrorDialog({ message: error.message }));
            } else if (aborted) {
                dispatch(abortSuccessAction());
            } else {
                dispatch(performDfuSuccessAction());
            }

            // DFU done. The adapter might still be connected to the device,
            // if the DFU failed or was aborted. Make sure the adapter is
            // disconnected from the device before handing back control of
            // events to nRF Connect.
            disconnectFromDevice(adapter, device.address).then(() =&gt; {
                dispatch(enableDeviceEvents(device.address));
            });
            // For unbonded Buttonless DFU:
            disconnectFromDevice(adapter, addressPlusOne).then(() =&gt; {
                dispatch(enableDeviceEvents(addressPlusOne));
            });
        });
</code></pre></td></tr></table>
</div>
</div><h2 id="nordicsemiconductorpc-nrfconnect-rssihttpsgithubcomnordicsemiconductorpc-nrfconnect-rssi"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-rssi" target="_blank" rel="noopener noreffer">NordicSemiconductor/pc-nrfconnect-rssi</a></h2>
<p><code>NODEJS</code></p>
<p><code>nrfconnect app</code></p>
<p>RSSI数据的可视化. The app shows dBm per frequency in the 2400-2480 MHz range, and allows the user to tweak settings like sweep delay and animation duration. The app can be installed from the Add/remove apps screen in nRF Connect.</p>
<p>The following devices are supported:</p>
<p>PCA10040 nRF52832 Development Kit
PCA10059 nRF52840 Dongle</p>
<h2 id="pc-nrfconnect-blehttpsgithubcomnordicsemiconductorpc-nrfconnect-ble"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-ble" target="_blank" rel="noopener noreffer">pc-nrfconnect-ble</a></h2>
<p><code>NODEJS</code></p>
<p><code>nrfconnect app</code></p>
<p>BLE连接库（管理与其他ble设备的连接）
nRF Connect Bluetooth® Low Energy is a cross-platform tool that enables testing and development with Bluetooth Low Energy (previously called Bluetooth Smart). It allows easy setup of connections with other devices and use these connections for reading and writing to the external nodes.</p>
<p>nRF Connect Bluetooth Low Energy is implemented as an app for nRF Connect.
The app supports the following devices:</p>
<ul>
<li>PCA10028 nRF51 Development Kit</li>
<li>PCA10031 nRF51 Dongle</li>
<li>PCA10040 nRF52 Development Kit</li>
<li>PCA10056 nRF52840 Development Kit</li>
<li>PCA10059 nRF52840 Dongle</li>
</ul>
<h2 id="pc-nrfconnect-corehttpsgithubcomnordicsemiconductorpc-nrfconnect-core"><a href="https://github.com/NordicSemiconductor/pc-nrfconnect-core" target="_blank" rel="noopener noreffer">pc-nrfconnect-core</a></h2>
<p>可在此框架上创建自己的APP</p>
<p>nRF Connect is跨平台的框架运行APPfor creating desktop apps for use with development kits or dongles from Nordic Semiconductor. It provides a common foundation for creating apps that communicate with the devices <em>ver serial port</em>,The framework comes with a skeleton(包含一些基础UI组件) that has standard UI components for selecting devices, navigation menus, logging, etc. Apps can decorate the standard components, create new components, and use built-in libraries in order to create end-user tools.</p>
<p>nRF Connect supports the following devices:</p>
<ul>
<li>PCA10028 nRF51 Development Kit</li>
<li>PCA10031 nRF51 Dongle</li>
<li>PCA10040 nRF52 Development Kit</li>
<li>PCA10056 nRF52840 Development Kit</li>
<li>PCA10059 nRF52840 Dongle</li>
</ul>
<p>Note that while the nRF Connect framework has support for all these devices, the device support in nRF Connect apps may vary.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>更新于 2019-04-08</span>
            </div><div class="post-info-mod"></div>
        </div></div><div class="post-nav"><a href="/post/%E5%B5%8C%E5%85%A5%E5%BC%8F-nfc/" class="prev" rel="prev" title="嵌入式-NFC"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/post/%E7%BC%96%E7%A8%8B-%E8%A7%84%E8%8C%83/" class="next" rel="next" title="编程-规范(NODE为主)">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div><div id="comments" class="single-card"><div id="utterances"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.68.3">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.0"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/">子兰</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment-alt fa-fw"></i>
            </a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/copy-tex.min.css"><script src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.0/dist/autocomplete.min.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.8.5/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/copy-tex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"","lightTheme":"github-light","repo":"Style-sen/hugoblogtalks"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"HM4MCKQ8J3","algoliaIndex":"blog_hugo","algoliaSearchKey":"745772944fb8af8e9fedec85d62d1a07","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script src="/js/themes.min.js"></script></body>
</html>
